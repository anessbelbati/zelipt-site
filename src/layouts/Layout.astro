---
import '../styles/global.css';

const siteName = 'Zelipt';

type Props = {
	title?: string;
	description?: string;
};

const {
	title = siteName,
	description = 'Zelipt is an AEO/GEO agency helping brands earn AI citations in ChatGPT, Gemini & Perplexity.',
} = Astro.props;

const fullTitle = title === siteName ? siteName : `${title} | ${siteName}`;
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content={description} />
		<meta name="theme-color" content="#ffffff" />
		<title>{fullTitle}</title>
	</head>
	<body class="min-h-screen bg-white text-slate-900 antialiased">
		<a
			href="#main-content"
			class="sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-[60] rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-900"
		>
			Skip to content
		</a>

		<header id="site-header" class="sticky top-0 z-50 border-b border-slate-200 bg-white">
			<div class="mx-auto flex h-16 max-w-5xl items-center justify-between gap-4 px-4 sm:px-6">
				<a href="/" class="text-base font-semibold tracking-tight text-slate-900">{siteName}</a>

				<nav aria-label="Primary" class="hidden items-center gap-6 md:flex">
					<a href="/#how-it-works" class="text-sm font-medium text-slate-700 hover:text-slate-900">How it works</a>
					<a href="/#ai-visibility-audit" class="text-sm font-medium text-slate-700 hover:text-slate-900">AI Visibility Audit</a>
					<a href="/#case-studies" class="text-sm font-medium text-slate-700 hover:text-slate-900">Case Studies</a>
					<a href="/pricing" class="text-sm font-medium text-slate-700 hover:text-slate-900">Pricing</a>
				</nav>

				<div class="hidden items-center gap-3 md:flex">
					<a href="/login" class="text-sm font-medium text-slate-700 hover:text-slate-900">Login</a>
					<a
						href="/#ai-visibility-audit"
						class="inline-flex items-center justify-center rounded-md bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800"
					>
						Get your free audit
					</a>
				</div>

				<button
					type="button"
					class="inline-flex items-center justify-center rounded-md border border-slate-200 p-2 text-slate-700 hover:bg-slate-50 hover:text-slate-900 md:hidden"
					aria-controls="mobile-menu"
					aria-expanded="false"
					aria-label="Open menu"
					data-mobile-menu-button
				>
					<svg data-icon="open" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="size-6">
						<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
					</svg>
					<svg data-icon="close" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="hidden size-6">
						<path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
					</svg>
				</button>
			</div>

			<div id="mobile-menu" class="hidden border-t border-slate-200 bg-white md:hidden" data-mobile-menu>
				<div class="mx-auto max-w-5xl px-4 py-4 sm:px-6">
					<nav aria-label="Mobile" class="flex flex-col gap-2">
						<a href="/#how-it-works" class="rounded-md px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-slate-900">
							How it works
						</a>
						<a href="/#ai-visibility-audit" class="rounded-md px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-slate-900">
							AI Visibility Audit
						</a>
						<a href="/#case-studies" class="rounded-md px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-slate-900">
							Case Studies
						</a>
						<a href="/pricing" class="rounded-md px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-slate-900">
							Pricing
						</a>

						<div class="mt-2 flex flex-col gap-2">
							<a href="/login" class="rounded-md px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-slate-900">
								Login
							</a>
							<a
								href="/#ai-visibility-audit"
								class="inline-flex items-center justify-center rounded-md bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800"
							>
								Get your free audit
							</a>
						</div>
					</nav>
				</div>
			</div>
		</header>

		<main id="main-content" class="mx-auto max-w-5xl px-4 py-10 sm:px-6 sm:py-14">
			<slot />
		</main>

		<footer class="border-t border-slate-200">
			<div class="mx-auto max-w-5xl px-4 py-8 text-sm text-slate-600 sm:px-6">
				<div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
					<p>© {new Date().getFullYear()} {siteName}. All rights reserved.</p>
					<p class="text-slate-500">AEO/GEO • AI citations • Search visibility</p>
				</div>
			</div>
		</footer>

		<script is:inline>
			const button = document.querySelector('[data-mobile-menu-button]');
			const menu = document.querySelector('[data-mobile-menu]');

			function setMenuOpen(open) {
				if (!button || !menu) return;
				menu.classList.toggle('hidden', !open);
				button.setAttribute('aria-expanded', String(open));
				button.setAttribute('aria-label', open ? 'Close menu' : 'Open menu');

				const openIcon = button.querySelector('[data-icon="open"]');
				const closeIcon = button.querySelector('[data-icon="close"]');
				if (openIcon) openIcon.classList.toggle('hidden', open);
				if (closeIcon) closeIcon.classList.toggle('hidden', !open);
			}

			if (button && menu) {
				button.addEventListener('click', () => {
					const isOpen = button.getAttribute('aria-expanded') === 'true';
					setMenuOpen(!isOpen);
				});

				menu.addEventListener('click', (e) => {
					const target = e.target;
					if (target && target.closest && target.closest('a')) setMenuOpen(false);
				});

				document.addEventListener('keydown', (e) => {
					if (e.key === 'Escape') setMenuOpen(false);
				});

				document.addEventListener('click', (e) => {
					const isOpen = button.getAttribute('aria-expanded') === 'true';
					if (!isOpen) return;

					const target = e.target;
					const clickedInsideHeader = target && target.closest && target.closest('#site-header');
					if (!clickedInsideHeader) setMenuOpen(false);
				});
			}
		</script>
	</body>
</html>
