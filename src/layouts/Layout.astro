---
import '../styles/global.css';

const siteName = 'Zelipt';

type Props = {
	title?: string;
	description?: string;
};

const {
	title = siteName,
	description = 'Zelipt is an AEO/GEO agency helping brands earn AI citations in ChatGPT, Gemini & Perplexity.',
} = Astro.props;

const fullTitle = title === siteName ? siteName : `${title} | ${siteName}`;
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<meta name="description" content={description} />
		<title>{fullTitle}</title>
	</head>
	<body class="min-h-screen bg-white text-slate-950 antialiased">
		<a
			href="#main-content"
			class="sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-[60] rounded-md bg-white px-3 py-2 text-sm font-medium text-slate-900 shadow ring-1 ring-slate-200"
		>
			Skip to content
		</a>

		<header
			id="site-header"
			data-scrolled="false"
			class="sticky top-0 z-50 border-b border-transparent bg-transparent transition-[background-color,border-color,box-shadow] duration-300 data-[scrolled=true]:border-slate-200/70 data-[scrolled=true]:bg-white/90 data-[scrolled=true]:shadow-sm data-[scrolled=true]:backdrop-blur"
		>
			<div class="mx-auto flex h-16 max-w-6xl items-center justify-between gap-4 px-4 sm:px-6 lg:px-8">
				<a href="/" class="inline-flex items-center gap-2 rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30">
					<span aria-hidden="true" class="size-2 rounded-full bg-gradient-to-tr from-indigo-500 to-fuchsia-500"></span>
					<span class="text-base font-semibold tracking-tight">{siteName}</span>
				</a>

				<nav aria-label="Primary" class="hidden items-center gap-6 md:flex">
					<a
						href="/#how-it-works"
						class="rounded-md px-2 py-1 text-sm font-medium text-slate-700 hover:text-slate-950 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
					>
						How it works
					</a>
					<a
						href="/#ai-visibility-audit"
						class="rounded-md px-2 py-1 text-sm font-medium text-slate-700 hover:text-slate-950 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
					>
						AI Visibility Audit
					</a>
					<a
						href="/#case-studies"
						class="rounded-md px-2 py-1 text-sm font-medium text-slate-700 hover:text-slate-950 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
					>
						Case Studies
					</a>
					<a
						href="/pricing"
						class="rounded-md px-2 py-1 text-sm font-medium text-slate-700 hover:text-slate-950 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
					>
						Pricing
					</a>
				</nav>

				<div class="hidden items-center gap-3 md:flex">
					<a
						href="/login"
						class="rounded-md px-2 py-1 text-sm font-medium text-slate-700 hover:text-slate-950 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
					>
						Login
					</a>
					<a
						href="/#ai-visibility-audit"
						class="inline-flex items-center justify-center rounded-md bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
					>
						Get your free audit
					</a>
				</div>

				<button
					type="button"
					class="inline-flex items-center justify-center rounded-md p-2 text-slate-700 hover:bg-slate-100 hover:text-slate-950 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30 md:hidden"
					aria-controls="mobile-menu"
					aria-expanded="false"
					aria-label="Open menu"
					data-mobile-menu-button
				>
					<svg data-icon="open" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="size-6">
						<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
					</svg>
					<svg data-icon="close" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor" class="hidden size-6">
						<path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
					</svg>
				</button>
			</div>

			<div id="mobile-menu" class="hidden border-t border-slate-200/70 bg-white/95 backdrop-blur md:hidden" data-mobile-menu>
				<div class="mx-auto max-w-6xl px-4 py-4 sm:px-6 lg:px-8">
					<nav aria-label="Mobile" class="flex flex-col gap-2">
						<a
							href="/#how-it-works"
							class="rounded-md px-3 py-2 text-sm font-medium text-slate-800 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
						>
							How it works
						</a>
						<a
							href="/#ai-visibility-audit"
							class="rounded-md px-3 py-2 text-sm font-medium text-slate-800 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
						>
							AI Visibility Audit
						</a>
						<a
							href="/#case-studies"
							class="rounded-md px-3 py-2 text-sm font-medium text-slate-800 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
						>
							Case Studies
						</a>
						<a
							href="/pricing"
							class="rounded-md px-3 py-2 text-sm font-medium text-slate-800 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
						>
							Pricing
						</a>

						<div class="mt-2 flex flex-col gap-2">
							<a
								href="/login"
								class="rounded-md px-3 py-2 text-sm font-medium text-slate-800 hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
							>
								Login
							</a>
							<a
								href="/#ai-visibility-audit"
								class="inline-flex items-center justify-center rounded-md bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-900/30"
							>
								Get your free audit
							</a>
						</div>
					</nav>
				</div>
			</div>
		</header>

		<main id="main-content" class="mx-auto max-w-6xl px-4 py-12 sm:px-6 sm:py-16 lg:px-8">
			<slot />
		</main>

		<footer class="border-t border-slate-200">
			<div class="mx-auto max-w-6xl px-4 py-8 text-sm text-slate-600 sm:px-6 lg:px-8">
				<div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
					<p>© {new Date().getFullYear()} {siteName}. All rights reserved.</p>
					<p class="text-slate-500">AEO/GEO • AI citations • Search visibility</p>
				</div>
			</div>
		</footer>

		<script is:inline>
			const header = document.getElementById('site-header');
			const button = document.querySelector('[data-mobile-menu-button]');
			const menu = document.querySelector('[data-mobile-menu]');

			function setScrolled() {
				if (!header) return;
				header.dataset.scrolled = window.scrollY > 8 ? 'true' : 'false';
			}

			function setMenuOpen(open) {
				if (!button || !menu) return;
				menu.classList.toggle('hidden', !open);
				button.setAttribute('aria-expanded', String(open));
				button.setAttribute('aria-label', open ? 'Close menu' : 'Open menu');

				const openIcon = button.querySelector('[data-icon="open"]');
				const closeIcon = button.querySelector('[data-icon="close"]');
				if (openIcon) openIcon.classList.toggle('hidden', open);
				if (closeIcon) closeIcon.classList.toggle('hidden', !open);
			}

			setScrolled();
			window.addEventListener('scroll', setScrolled, { passive: true });

			if (button && menu) {
				button.addEventListener('click', () => {
					const isOpen = button.getAttribute('aria-expanded') === 'true';
					setMenuOpen(!isOpen);
				});

				menu.addEventListener('click', (e) => {
					const target = e.target;
					if (target && target.closest && target.closest('a')) setMenuOpen(false);
				});

				document.addEventListener('keydown', (e) => {
					if (e.key === 'Escape') setMenuOpen(false);
				});

				document.addEventListener('click', (e) => {
					const isOpen = button.getAttribute('aria-expanded') === 'true';
					if (!isOpen) return;

					const target = e.target;
					const clickedInsideHeader = target && target.closest && target.closest('#site-header');
					if (!clickedInsideHeader) setMenuOpen(false);
				});
			}
		</script>
	</body>
</html>
